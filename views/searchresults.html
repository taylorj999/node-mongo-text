{% extends 'frametemplate.html' %}

{% block title %}Search Results{% endblock %}

{% block header %}
<script type="text/javascript" src="/js/jquery.simplePagination.js"></script>
<link rel="stylesheet" href="/css/simplePagination.css"/>
<script language="JavaScript">
$( document ).ready(function() {
    $("#pagination").pagination({
        items: {{count}},
        itemsOnPage: {{config.resultsPerPage}},
        cssStyle: 'light-theme',
        currentPage: $('input[name="page"]').val(),
        onPageClick: function (pageNum) {
        	$('input[name="page"]').val(pageNum);
        	document.forms.search.submit();
        }
    });
});
</script>
{% endblock %}

{% block leftcolumn %}
	<div class="taglist">
	{% for tag in taglist.sort() %}
		<div class="tag" id="{{tag}}"><a href="/search?tags={{tag}}&page=1">{{tag}}</a></div>
	{% endfor %}
	</div>
{% endblock %}

{% block main %}
	<div id="alert">{{error}}</div>
	<div class="summarylist">
	{% for textdata in searchresults %}
		<div class="summaryitem">
			<div class="summaryitemtitle">
				<a href="/document?id={{textdata._id.toString()}}">
				{{textdata.title}}
				</a>
			</div>
			<div class="summaryitemsummary">
				{{textdata.summary}}
			</div>
			{% if textdata.tags %}
			<div class="summaryitemtags">
			Tags: {{textdata.tags}}
			</div>
			{% endif %}
		</div>
	{% endfor %}
		<div class="pagination" id="pagination"/>
	</div>
{% endblock %}